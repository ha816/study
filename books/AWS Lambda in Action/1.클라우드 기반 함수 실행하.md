# Overview

최근 몇년동안 클라우드 컴퓨팅은 IT 서비스를 구현하는 방식에대한 근본적인 방식을 바꾸고 있다. 클라우딩 컴퓨팅을 사용하면 회사의 크기와 관계 없이 확장성 높은 애플리케이션을 쉽게 만들도록 했기 때문이다. 예를들어, 드랍박스는 파일을 저장하고 공유하는 방법을 바꾸었다. 

초기 작은 회사에서는 아이디어를 빠르게 구현할 수 있는 기술 및 자원이 필요데, 클라우딩 컴퓨터의 가장 중요한 이점은 바로 개발자들이 불필요한 시간을 쓰지 않도록 해준다는 것이다. 즉, 인프라를 관리 및 확장하고, 서버 운영체제와 코드를 위한 소프트웨어 스택을 관리 업데이트해야 하는 부담을 덜어주기 때문이다. 클라우딩을 이용하면 중요한 비지니스 로직 구현에만 집중할 수 있다 .

AWS Lambda를 도입하면 추상화 레이어를 더 높게 설정할 수 있어 개발자는 코드를 함수별로 모아 업러드하고 해당 기능을 플랫픔에서 실행할 수 있다. 이런 방식으로 직접 프레임 워크, 운영체제의 가용성 및 확장성을 관리할 필요가 없어진다. 함수는 모두 AWS에서 제공하는 표준 보안 기능을 통해 작업 범위와 접근 가능한 자원을 지정하는 자체 설정이 있다.

각 함수는 직접 호출해 실행하거나 다른 AWS 자원(resource)에서 생성한 이벤트를 통해 실행할 수 있다. 즉 함수를 파일 저장소나 데이터베이스와 같은 자원에 등록하면 함수는 구독한 이벤트 종류에 따라 해당 자원에서 어떤 동작이 발생할 경우 자동으로 실행된다. 예를 들어, 특정 파일이 업로드 되거나 데이터베이스 항목이 수정되었다는 이벤트가 발생하면, AWS 람다 함수가 이런 변경 동작에 반응하여 새 파일 또는 업데이트된 데이터로 다른 동작을 수행할 수 있다. 이런 방법으로 각 리소스 이벤트에 의해 구동되는 애플리케이션을 디자인할 수 있다. 

여러 함수를 함께 사용하면 스마트폰과 같은 사용자 기기에서 직접 호출하는 함수와 파일 공유 및 데이터베이스와 같은 여러 저장소와 연계된 함수등을 사용하여 완벽한 **이벤트 기반 애플리케이션을 구축할 수 있다.** 

**이벤트 기반 접근 방식을 통해 정식 서비스 환경의 개발 프로세스를 단순화할 뿐만이 아니라 애플리케이션 비즈니스 로직을 보다 쉽게 디자인하고 확장할 수 있다.** 

# AWS Lambda 소개

AWS 람다는 물리적 서버 또는 가상 서버 기반의 전통적인 접근 방법과 완전히 다르다. **여러 함수로 구성된 논리적인 구성과 이들 함수를 실행하는 서비스만 신경쓰면 된다. 선택한 언어별 런타임을 위한 소프트웨어 스택, 플랫폼 가용성 및 확장성과 함수 호출 처리를 유지하기 위한 인프라는 신경쓰지 않아도 된다.** 

각 함수는 컨테이너에서 실행한다. 각 컨테이너는 운영체제의 커널이 격리된 환경을 구현하는 서버 가상화 방식이다. **AWS Lambda를 사용하면 물리적 서버의 가상 컨테이너 안에서 코드가 실행하지만 그 인프라를 관리할 필요는 없다.** 그런 측면에서 개발자에게는 서버가 없는 것으로 보이며 이러한 접근 방식을 서버리스(serverless)라고 부른다. 

AWS 관리 콜솔을 통해 새로운 람다함수를 만들때 먼저 함수 이름을 지정하고, 프로그램 코드를 짠 후 다음과 같이 함수를 실행하는데 필요한 실행 환경 구성을 지정하게 된다. 

* 함수를 실행하기 위한 최대 메모리 크기(memory size)
* 함수가 완료되지 않더라도 종료시킬 제한 시간(timeout)
* AWS IAM(Identity and Access Management)를 통해 함수가 접근할 수 있는  AWS 자원 및 권한에 대한 역할 지정(role)

>함수 실행에 필요한 메모리 양을 선택하면 선택한 양에 따라 비례하여 CPU 성능을 자동할당한다. 예를 들어, 256MB를 사용한다고 하면 128MB를 선택했을때 보다 두배의 CPU 성능을 할당한다.

AWS Lambda는 혁신적으로 뛰어난 최소 비용 모델을 적용해 컴퓨팅 자원을 효율적으로 사용할 수 있다. 비용을 계산하는데 크게 두 가지 방식을 사용하는데 '총 호출수', '밀리 세컨드 단위의 실행' 이다.

밀리 세컨드 단위 실행 시간에 대한 비용은 메모리와 함께 선형으로 증가한다. 만일 메모리 할당량을 두배로 늘리고, 실행 시간을 동일하게 유지하면 비용은 두배가 된다. 여러분이 람다를 정식 서비스에 적용하기 전에 테스트를 위해 프리티어(free tier)를 활용하면 추가 비용 없이 AWS Lambda를 사용할 수 있다. 

AWS Lambda를 사용하여 함수를 호출하면 입력에 이벤트(event)와 컨텍스트를 지정해야 한다. 이벤트 함수는 함수에 대한 입력 매개변수를 보내는 방법이며 JSON 문법으로 표현한다. 그리고 컨텍스트는 서비스에서 실행 환경과 이벤트 수신 및 처리 방법을 설명한다. 

## 호출

동기적으로 호출하여 결과를 반환하는 경우 동기적 호출이라 한다. AWS Lambda API또는 CLI에서는 **RequestResponse** 호출로 표현한다.  예를 들어, 자바스크립트 런타임을 통한 두 숫자의 합을 계산하는 동기 함수는 아래와 같다. 

```
exports.handler = (event, context, callback) => {
	var result = event.value1 + event.value2
	callback(null, result);
};
```

물로 함수를 비동기적으로 호출할수도 있다. 이 경우 결과는 즉시 반환되지 않는다. 다른 곳에서는 이 말을 **이벤트 호출** 유형으로 사용하고 잇다. 

**람다함수가 종료되면 AWS Lambda 서비스는 세션 정보를 유지하지 않는다.** 이러한 서버와 상호작용은 일반적으로 상태 비저장(stateless)로 정의한다. 이런 동작 방식을 고려하여 람다 함수를 비 동기적으로 호출하면(바로 값을 반환하지 않기 때문에) 다른 자원(공유 리포지토리 파일, 데이터 베이스 레코드등)의 상태를 접근 및 수정하거나 다른 서비스를 호출할때 이메일을 보내거나 푸시 알림을 보낼때 유용하다. 

## 백엔드 함수 구성하기


### 이벤트 기반 애플리케이션

일반적으로 Aws Lambda 기능을 클라이언트 애플리케이션의 백엔드 API를 직 접 사용하는 것을 맞춤 이벤트(custom event)라고 한다.









> Written with [StackEdit](https://stackedit.io/).
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTY0MzgwMDkxMywxNTc5MzkyMzUxLDk1Nz
ExMjI3LDE5NzIwMzEwNjgsMTY3Njk2MjA4MCw4OTI1MjEwMzcs
LTEzODg2MDcwMDAsLTEyMjk3Mzg2MzEsLTEyNjgwMDIwMTksLT
kzODc5MjU5OCwtMjAzNDkyMjE2NSwtMTY4NTI4NTEyNCwtNzI0
OTQwODgwLDk0MzU0MzYyOCwtMTQxODYwNzkxNCwtMjAzMDc4Nz
I1OF19
-->