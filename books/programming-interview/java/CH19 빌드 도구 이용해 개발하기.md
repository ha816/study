# Maven(메이븐 )

사용하기 좋은 애플리케이션을 만드는 데는 자바 소스 코드를 작성하는 것 이외에도 훨씬 많은 부분을 고려해야 한다. 왜냐하면 애플리케이션은 여러 가지 생산물, XML 설정, 환경 지정 속성, 이미지, 다른 언어를 위해 내장된 코드등으로 구성된다. 

프로젝트의 자원을 모두 하나로 합치는 데 집중하는 애플리케이션인 메이븐을 살펴본다. 

>Maven이란 무엇인가?
>메이븐은 프로젝트 전체를 포괄하는 빌드 도구로, 자바 프로젝트를 컴파일, 테스트, 배포하는데 사용된다. 애플리케이션일 구동하는데 필요한 자원들을 어디서 찾아야하는지 파악해 여러 빌드 작업을 수행한다. 


대부분 프로젝트는 기본적으로 애플리케이션이 WAR나 JAR 파일로 배포될 것이다. 메이븐은 이를 어떻게 빌드해야하는지 알고 있다.

복잡합 애플리케이션은 JUnit, 아파치 commons, Guava등 여러 라이브러리에 의존성을 가지고 있다. 메이븐은 의존성을 정의할 수 있고 , 인터넷상의 www.maven.org같은 저장소나 Artifactory, Nexus 등을 이용해서 회사 내부에 설치한 저장소에서 관리하는 필요한 JAR 파일을 직접 다운로드할 수 있다.

메이븐의 플러그인 시스템은 빌드에 특정 연산을 추가해서 가능하게 한다. 의존성 설정과 비슷하게 이 플러그인들은 원격으로 제공되며, 메이븐은 빌드할 때 이들을 찾을 수 있다. 또한 플러그인이 제공하는 연산이 무엇이든 실항 할 수 있다. 일반적인 플러그인의 예를 maven-jetty-plugin인데, 현재 빌드를 웹어플리케이션 형태로 실행한다. 

실행을 하기위한 작업의 특정 단위를 골(Goal)이라고 한다. 특정 골은 compile, test, install 같은 빌드 생명주기의 상태에 따라 구분된다. 예를 들어 mvn compile이라는 명령을 실행할 때는 실제로 compiler 플러그 인의 compile을 실행하는 것이다. 


## 메이븐 빌드의 기본 디렉터리 구조

![enter image description here](https://p7.hiclipart.com/preview/980/890/407/apache-maven-convention-over-configuration-apache-ant-directory-structure-coc.jpg)

모든 제품 패키지 구조는 src/main/java 디렉터리 하위에 있다. 이 구조의 모든 클래스는 실행할때 클래스 패스 상에 있을 것이다. 

클래스 패스에 다른 파일들도 넣을 수 있다. 이 파일들은 src/main/resources 디렉터리 안에 있다. 여기에는 일반적으로 설정 파일들이 들어간다. 스프링 애플리케이션 컨텍스트의 설정 뿐만 아니라 모든 properties 파일이 포함될 수 있다. 

test 패키지 하위는 테스트용 설정 같은 테스트 코드로 추가할 수 있으며, 이러한 코드는 test/main/java와 test/main/resources에 두면 된다. 메이븐이 빌드의 일부로 어떤 테스트를 실행할때, 이경로에 있는 클래스와 파일들도 클래스 패스에 추가된다. 단 분리된 상태로 유지되며 생산 배포용으로 빌드된 결과물에는 포함되지 않는다. 

## 메이븐 빌드의 생명주기 

메이븐 빌드는 생명주기란 일련의 상태로 구성되며 각 상태는 특정 골에 따라 구분된다. 각 상태는 이전 상태에 의존하며 어떤 이유에서든 특정 골을 통한 작업에 문제가 발생하면 전체 빌드가 실패할수 밖에 없다. 

maven의 Goal

clean
: target 디렉터리를 지워서 이전에 빌드된 파일들을 없앤다. 이는 mvn clean 같은 빌드 상태를 명시해서 초기화하거나 항상 실행되도록 POM을 정의하지 않으면 다음 상태가 되기 전에는 실행하지 않는다.
  
validate
: pom.xml파일이 메이븐의 빌드 파일용 XML을 따르는지 확인한다. 


-> compile
-> test
-> package
-> install

어떤 빌드 결과물은 프로젝트 루트의 target이라는 디렉터리에 저장된다. 







## 메이븐 애플리케이션 빌드

## 결과물 애플리케이션간 공유






> Written with [StackEdit](https://stackedit.io/).
<!--stackedit_data:
eyJoaXN0b3J5IjpbODM4MDUyMjg1LC0xMjQ3NTc3MDE1LDI5NT
cxMjQ4MCwtMTM5Mzk5Nzc3MywtMTAyNDMyOTQ5MiwtMTI5MDQ2
NTQ2NywzNTYxODQzNzNdfQ==
-->