# 그래프데이터 베이스 

## 왜 그래프 데이터베이스를 사용하는가?

### 복잡한 질의

복잡한 질의는 원하는 데이터를 얻기 위해 여러가지 복잡한 조인 형태의 연산으로 구성되어 있다. 이러한 연산은 사용되는 테이블간의 가능한 모든 결합을 모두 구해야 하기 때문에 많은 시스템 자원이 소비된다.

2~3개의 테이블 사이에서 조인을 수행하는 경우는 괜찮을 수 있지만 사용해야할 테이블 갯수가 늘어나면 경우의 수가 기하급수적으로 늘어난다는 것이 문제다. 이처럼 관계형 데이베이스에서는 복잡한 질의를 쉽게 해결할 수 없다. 

**그래프 데이터베이스에서는 조인 작업을 수행할 필요가 없다.** 그래프 데이터베이스는 일반적으로 인덱스 탐색을 이용해 시작 노드를 찾은후, 색인 없는 인접성 특성을 사용해 연결관계를 통해 다음 노드로 이동한다. 경로를 따라 이동하는 모든 홉은 사실상 조인 작업과 동일하다. 따라사 **노드간의 관계는 조인 작업이 명시적으로 저장된 표현이라 생각할 수 있다.** 

종종 이런 유형의 쿼리는 패턴 매칭 쿼리라고 부른다. 패턴을 지정한 후, 이 패턴을 하나 또는 그 이상의 시작점에 고정시키고 이 패턴이 일치하는 항목을 찾는다. 그래프 데이터베이스는 시작 노드 주위를 회전하면서 연결된 패턴이 일치하는지를 판단하는 훌륭한 도구다. 일치하지 않는 패턴을 무시되고, 시작 노드에 연결되지 않은 패턴은 고려하지 않는다. 이것은 그래프 데이터베이스의 핵심 성능 특성 중 하나인데, 시작 노드를 가져오면 데이터베이스는 시작 노드 부근을 탐색하고 시작 노드에 연결되지 않은 것은 전혀 신경쓰지 않는다. 대부분의 그래프에서 모든 노드가 다른 모든 노드와 연결되어 있는 것은 아니기 때문에 쿼리 성능은 데이터 집합의 크기와 독립적이다. 즉 노드의 데이터 집합 크기가 증가하더라도 성능상 저하가 크지 않다. 이와 대조적으로 다른 데이터베이스에서 성능은 결과 집합의 크기에 매우 의존적이며, 이는 아키텍처를 구성할때 명심해야할 사항이다. 

### 실시간 데이터에 대한 클릭 스트림 쿼리

다양한 데이터 베이스 질의는 실시간 데이터 베이스 관리 시스템에서는 끔찍한 성능을 보인다. 조인 연사은 시스템 자원을 사용하며, 이는 전체 애플리케이션 응답에 큰 위험을 초래한다. 그래서 관계형 데이터 베이스 관리 측면에서는 해당 목적을 위해 구체적으로 미리 계산되고 포맷된 데이터를 이용해 이런 질의를 수행한다.

데이터를 복제하고 데이터를 반정규화하고 추출, 변환 및 적재(Extract, Transform, Load, ETL)하는 기술을 사용해 비지니스 인텔리전스 시틈에서도 종종 사용되는 데이터에 대한 질의 지향적인 표현을 만드는 것을 큐브(Cube)라고 한다. 

그레프 데이터를 사용하면 데이터를 많이 복제하지 않아도 되는 데이터에 대해 웹 요청과 응답의 다양하고 복잡한 질의에 응답할 수 있으므로 거의 실시간으로 업데이터할 수 있다. 

### 경로 탐색 질의 

그래프 데이터베이스에 가장 적합한 또 다른 유형의 질의는 서로 다른 데이터 요소가 서로 어떻게 괸련되어 있는지 확인하는 것이다. 다시 말해, 그래프에서 서로 다른 노드사이의 경로를 찾는 것이다. 다른 데이터베이스 관리 시스템에서는 이러한 쿼리를 작성하기 위해 경로의 구조를 잘 알고 있어야 한다. 즉 데이터베이스에게 하나의 테이블에서 다른 테이블로 이동하는 방법을 알려줘야 한다. 

**그레프 데이터에서는 시작점과 끝점에 그래프 알고리즘을 적용하라고 알려주면 된다.**

데이터 요소가 서로 어떻게 연결되는지 파악하고, 그 결과를 시스템에 사용할 수 있는 경로 표현으로 변환하는 것은 데이터베이스의 몫이다. 

## 그래프 데이터베이스를 사용하지 않을 경우, 대신 무엇을 사용할 것인가?

NoSQL 데이터베이스의 범주의 개념은 모두 작업지향에 관한것이다. 작업에 적합한 도구를 사용해야 한다. 이는 그래프 데이터베이스가 완벽하게 맞지 않는 경우도 있음을 의미한다. 이제 그래프 데이터베이스를 사용하지 않는 것이 좋은 경우를 살펴보도록 하자.

### 대규모 집합지향 쿼리

많은 조인 연산과 많은 집계(합계, 계산, 평균) 연산이 필요하지 않다면 그래프 데이터베이스의 성능이 다른 데이터베이스 관리 시스템에 비해 좋은것만은 아니다. 그래프 데이터베이스가 이런 작업을 수행할 수 있다는 것을 확실하지만, 성능상 이점이 적거나 부정적일 수도 있다. 

### 글로벌 그래프 작업

그래프 이론은 그래프 전체를 분석하고 이해하는데 있어서 매우 매력적이다. 노드 클러스터를 










> Written with [StackEdit](https://stackedit.io/).
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE3MTkwNDI2MjEsLTExODg5MTA0Myw5OD
M3MDI3MzgsMTk2NjU0MDgyMCw3NjE1Nzk2NjEsLTU5Mjk0NDYw
OSwxMTU2MTY5NzA0LC0yMTIxNDk4Nzk4LDczMDk5ODExNl19
-->