# 8장 방어적 프로그래밍

방어적 프로그래밍은 코드 작성에 대해 방어적인 태도를 보이라는 의미가 아니다. 그 보다는 안정적으로 운전하는 습관에 가깝다. 

방어적 프로그래밍에서 가장 중요한 개념은 설령 다른 루틴의 잘못으로 인한 거싱라도 루틴에 잘못된 데이터가 들어왓을때 루틴에 아무런 문제가 발생하지 않도록 하는데 잇다. 

타당하지 않은 데이터와 절대로 발생할 수 없는 이벤트, 다른 개발자의 실수로부터 자신을 보호하기 위한 방법을 설명한다. 


## 8.1 잘못된 입력으로부터 프로그램 보호

쓰레기를 넣으면 쓰레가 나온다.(Garbage in, garbage out)

### 외부로부터 들어오는 모든 데이터의 값이 검사

파일이나 사용자, 네트워크, 그 밖의 다른 인터페이스로부터 데이터 받을때 허용가능한 범위에 있는지 검사를 해라. 


숫자값은 허용 범위 내
문자열은 길이 또는 제한된 값


### 루틴의 모든 입력 매개변수를 검사
사실 8.5절 오류로 인한 손상을 막기위한 방책에서 입력검사는 해야하는 루틴이 어느것인지 결정하기 위한 실용적인 방법을 제공

### 잘못된 이별긍 ㄹ어떻게 처리할 것인지를 결정하라

유효하지 않은매개변수를 어떻게 처리해야 할가? 8.3절에서 자세히 소개 한다. 

## 8.2 어설션

어설션은 대개 루틴이나 매크로 실행시 프로그램이 스스로 검사할수 있도록 사용하는 코드다.
어설션이 참이면 모든것이 잘 동작하고 있다는 것을 의미한다.  어셜션이 거짓일때는 코드에서 예상치 못한 오류가 발생했다는 의미다.

어설션은 일반적으로 두개 인자를 갖는다. 

```
assert denominator != 0 : "unexpected error";
```
첫번째 인자는   denominator != 0이고 두번째 인자는 첫번째 인자가 거짓일때 출력하는 메세지이다. 

일반적으로 배포되는 코드에서는 어설션 메세지를 사용자에게 보여주지 않는다. 어설션은 주로 개발과 유지보수에 사용되며, 개발버전에서는 코드에 포함되지만 제품에서는 제외된다. 

### 어설션 사용지침

발생이 예상되는 상황에서는 오류 처리 코드를 사용하되, 절대로 발생해서는 안되는 조건에 대해서는 어설션을 사용하라. 

다시 강조하지만 어설션은 절대로 발생해서는 안되는 조건을 검사한다. 
오류 처리 코드로 비정상적인 조건을 처리하면 프로그램이 매끄럽게 상황을 처리할 것이다. 어설션을 통해 비정상적인 조건을 처리하면 프로그램이 강제로 충돌하게 되어 문제를 해결하기 위해 버그를 해결하고 새로운 버전을 배포해야 한다. 

### 선행 조건과 후행조건을 문서화하고 검증하는데 어설션을 사용하라. 

선행조건은 루틴이나 클래스에서 다른 루틴을 호출하거나 객체를 생성하기 전에 반드시 참이어야 하는 특성이다. 선행 조건은 루틴을 호출하는 쪽에서 반드시 지켜야 한다

후행조건은 루틴이나 클래스 호출후 반드시 참이어야 하는 조건이다. 후행 조건은 호출된 코드나 클래스가 지켜야 하는 약속이다. 







 



> Written with [StackEdit](https://stackedit.io/).
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTIyMDk0MTAzLC0yMDI2NTAwNjgwLC0yMT
M4MDU3MjI5XX0=
-->