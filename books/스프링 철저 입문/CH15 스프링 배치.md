# Spring Batch

흔히 말하는 엔터프라이즈 시스템에서는 사용자와 직접 상호작용하는 웹 애플리케이션 뿐만 아니라 사용자와 무관하게 일정 주기마다 실행되야 하는 배치 애플리케이션도 필요하다. 

## Batch

일반적인 배치 처리는 두 가지 특징을 가진다.
* 일정량의 데이터를 모아서 한번에 처리
* 일정한 순서에 따라 처리가 수행된다.

배치 처리는 응답성보다 시간당 처리량을 우선시 하는 처리 방식이다. 말 그대로 수천건의 달하는 대량의 데이터를 단시간에 처리하는 모습을 보인다.

일반적인 배치는 여러 다양한 기술을 조합해서 사용하는 경우가 많은데 일반적으로 아래 기술들을 많이 쓴다.

잡 스케쥴러
: 배치처리에서 하나의 실행 단위를 잡(JOB)이라 한다. 보통 수백에서 수천개의 잡이 관리되는데, 이러한 잡을 원할이 실행되기 위해서는 연관관계를 정의하거나 실행 스케쥴을 관리하는 기능이 필요하다.

셀 스크립트
: 셀 스크립트로 하나의 잡을 처리할 수도 있다. 비교적 간단한 처리를 하는데 쓰이지만 복잡한 잡은 상당히 만들기 어렵다.

자바와 같은 프로그래밍 언어
:  프로그래밍 언어로 별도의 애플리케이션을 개발해 잡을 처리 할 수도 있다.  비교적 복잡한 비즈니스 로직을 처리한다거나 파일이나 데이터베이스 데이터 가공 처리등에 활용된다. 

그러면 배치 처리 방식이 반드시 지켜야할 요건은 무엇일까? 물론 시스템에 따라 달라지겠지만 아래것이 대표적인 요건이다.  

* 대량의 데이터를 제한된 리소스로 효율적으로 처리해야한다.
	* 시간당 처리량과도 관련이 있지만 대량의 데이터를 모아 처리하면 처리 시간을 줄일 수 있다. 일정량 내용을 모아서 처리할때는 트랜잭션 처리 역시 일정량 단위로 시작 및 종료할 수 있어야 한다. 또 데이터가 너무 많으면 일정 단위나 건수로 분할하여 멀티 스레드 방식으로 다중 처리를 하던가 입출력을 최대한 자제하는 등 다양한 노력을 기울여야 한다.
* 가능한 한 중단된 작업을 다시 계속할 수 있어야 한다.
	* 대량의 데이터를 처리하는 동안 입력 데이터의 오류가 있거나 시스템 자체의 이상이 발생했을때 대비한 방어 대책도 생각해 둬야 한다. 데이터가 많으면 당연히 처리가 오래걸리는데 중단되고 복구가 될때 까지는 얼마나 시간이 걸릴지 모른다. 따라서 부작용을 줄이기 위해 작업을 이어서 처리하거나 처리 자체를 처음부터 재처리할 수 있도록 만들 필요가 있다. 
* 다양한 실행 조건을 지원해야 한다
	* 특정 시간이 되면 잡 스케줄러가 배치처리를 위한 프로세스를 기동하고, 완료되면 프로세스를 종료시킨다거나, 프로세스를 항상 상주시켜 놓은 상태에서 수시로 배치처리를 기동하는 등 다양한 실행 방식을 수용해야 한다.
* 다양한 입출력 인터페이스를 다룰 수 있어야 한다.
	* 외부 시스템과 연계할 때는 DB는 물론 CSV나 XML과 같은 다양한 파일도 지원해야 한다. 다양한 입출력을 다룰 수 있는 구조라면 배치 처리가 훨씬 쉬워진다.

> delayed batch, on-line batch?





## Spring Batch

스프링 배치는 자바로 배치 애플리케이션을 개발할때 활용 할 수 있는 프레임워크로 앞선 각종 요건을 이미 갖추고 있다.



> Written with [StackEdit](https://stackedit.io/).
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE1NzI3MDAxOTcsLTM4MjEwNjg5NCwxND
M0MzUyMTU2LDI5MTg5MTI4MiwtMTczMTEzODc0OSw4NTk1NTU0
NjMsODg4OTc3NjA3XX0=
-->